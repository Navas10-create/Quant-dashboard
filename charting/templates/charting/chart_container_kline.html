<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Chart â€” {{ symbol }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='charting/css/kline_styles.css') }}">
  <!-- KLineChart CSS (from CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/klinecharts@1.16.0/dist/klinecharts.min.css" />
  <style>
    body { margin: 0; font-family: system-ui, Roboto, Arial; }
    .toolbar { padding: 8px; display:flex; gap:8px; align-items:center; }
    #chart-root { width: 100%; height: calc(100vh - 56px); background:#fff; }
  </style>
</head>
<body>
  <div class="toolbar">
    <h3 style="margin:0">{{ symbol }}</h3>
    <select id="tfSelect">
      <option value="1">1m</option>
      <option value="5">5m</option>
      <option value="15">15m</option>
      <option value="60">1h</option>
      <option value="D">1D</option>
    </select>
    <button id="btnReload">Reload</button>
    <div style="margin-left:auto">Source: <span id="dataSourceBadge">local</span></div>
  </div>

  <div id="chart-root"></div>

  <!-- KLineChart from CDN (use specific version) -->
  <script src="https://unpkg.com/klinecharts@1.16.0/dist/klinecharts.min.js"></script>

  <!-- Chart glue -->
  <script>
    window.CHART_CONFIG = {
      symbol: "{{ symbol }}",
      dataEndpoint: "{{ url_for('charting.chart_data') }}"  // uses existing router
    };
  </script>
  <script src="{{ url_for('static', filename='charting/js/kline_core.js') }}"></script>
</body>
</html>
